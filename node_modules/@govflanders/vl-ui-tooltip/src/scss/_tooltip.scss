// IMPORTANT: we can not namespace .tooltip__inner,
// this is needed for the tooltip.js/popper.js library

$tooltip-arrow-width: 7px;
$tooltip-arrow-outer-width: ($tooltip-arrow-width + 1);
$tooltip-translate: $tooltip-arrow-width + 3px;

.vl-tooltip {
  max-width: 27rem;
  background: $page-bg;
  border: 1px $border-color solid;
  text-align: center;
  font-size: 1.4rem;
  line-height: 1.4;
  font-weight: 500;
  color: $text-color;
  font-family: $accent-font;
  padding: .2rem 0.7rem;
  z-index: 1;
  position: relative;

  //to catch the mouse when it leaves the trigger element
  &::before {
    content: "";
    position: absolute;
    top: - ($tooltip-translate + 1px);
    right: - ($tooltip-translate + 1px);
    bottom: - ($tooltip-translate + 1px);
    left: - ($tooltip-translate + 1px);
  }

  &--static {
    display: block;
    pointer-events: auto;

    &[x-placement^="top"] {
      transform: translate(-50%, -100%);
      margin-left: 50%;
    }

    &[x-placement^="left"] {
      transform: translate(-100%, 0%);
    }

    &[x-placement^="bottom"] {
      transform: translate(-50%, 0%);
      margin-left: 50%;
      top: 100%;
    }

    &[x-placement^="right"] {
      margin-left: calc(100% + 10px);
    }
  }

  //When charcount is higher than 110 align text to the left + lower fontweight
  &.vl-tooltip--large {
    font-weight: 400;
    box-shadow: $base-box-shadow;

    .tooltip__inner {
      text-align: left;
    }
  }

  &__title {
    margin: 0 0 .5rem;
    border-bottom: 1px solid darken($border-color, 6%);
    font-size: 1.6rem;
    font-weight: 500;
  }

  &__close {
    border: 0;
    font-size: 2.2rem;
    position: absolute;
    top: 0;
    right: 0;
    background: transparent;
    padding: .3rem 1.2rem;
    z-index: 1061;
    cursor: pointer;
  }

  &[x-placement^="top"] {
    .vl-tooltip__arrow {
      left: 50%;
      margin-left: -$tooltip-arrow-outer-width;
      border-bottom-width: 0;
      border-top-color: $border-color;
      bottom: -$tooltip-arrow-outer-width;

      &::after {
        content: " ";
        bottom: 1px;
        margin-left: -$tooltip-arrow-width;
        border-bottom-width: 0;
        border-top-color: $page-bg;
      }
    }
  }

  &[x-placement^="right"] {
    .vl-tooltip__arrow {
      top: 50%;
      left: -$tooltip-arrow-outer-width;
      margin-top: -$tooltip-arrow-outer-width;
      border-left-width: 0;
      border-right-color: $border-color;

      &::after {
        content: " ";
        left: 1px;
        bottom: -$tooltip-arrow-width;
        border-left-width: 0;
        border-right-color: $page-bg;
      }
    }
  }

  &[x-placement^="bottom"] {
    .vl-tooltip__arrow {
      left: 50%;
      margin-left: -$tooltip-arrow-outer-width;
      border-top-width: 0;
      border-bottom-color: $border-color;
      top: -$tooltip-arrow-outer-width;

      &::after {
        content: " ";
        top: 1px;
        margin-left: -$tooltip-arrow-width;
        border-top-width: 0;
        border-bottom-color: $page-bg;
      }
    }
  }

  &[x-placement^="left"] {
    .vl-tooltip__arrow {
      top: 50%;
      right: -$tooltip-arrow-outer-width;
      margin-top: -$tooltip-arrow-outer-width;
      border-right-width: 0;
      border-left-color: $border-color;

      &::after {
        content: " ";
        right: 1px;
        border-right-width: 0;
        border-left-color: $page-bg;
        bottom: -$tooltip-arrow-width;
      }
    }
  }
}

// Arrows
//
.vl-tooltip__arrow {
  border-width: $tooltip-arrow-outer-width;

  &,
  &::after {
    position: absolute;
    display: block;
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;
    border-width: $tooltip-arrow-width;
    content: "";
  }
}
